<div class='row-fluid'>
    <div class='col-md-12'>
        <div class='pull-right'>
            <div class="btn-group">
                <a href="{{=URL('curso', 'add_inscriptos', args=curso)}}" class="btn btn-xs btn-default">
                    <span class='glyphicon glyphicon-plus'></span> Inscribir Nuevo
                </a>
                <a href="{{=URL('curso', 'import_inscriptos', args=curso)}}" class="btn btn-xs btn-default">
                    <span class='glyphicon glyphicon-paperclip'></span> Importar
                </a>
                <a href="{{=URL(c='reports',
                                f='certificados',
                                args=(curso, 'all'),
                                extension='pdf')}}" class="btn btn-xs btn-default">
                    <span class='glyphicon glyphicon-print'></span> Certificados
                </a>
            </div>
        </div>
    </div>
</div>

<div class='row-fluid'>
    <div class='col-md-12'>
        {{if inscriptos:}}
            <div class='table-responsive' style="margin-top:10px;">
                <table id='curso-inscriptos' class="table table-striped table-bordered" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Inscripto</th>
                            <th>Matricula</th>
                            <th>Documento</th>
                            <th>Domicilio</th>
                            <th><span class='glyphicon glyphicon-usd' title='Cantidad abonada'></span></th>
                            <th><span class='glyphicon glyphicon glyphicon-list-alt' title='Se acreditÃ³?'></span></th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        {{for row in inscriptos:}}
                            <tr data-target='inscripto-{{=row.id}}' data-db='true'>
                                <td>{{=A(label_inscripto(row),
                                        _href=URL(c='persona',
                                                  f='index',
                                                  args=('view', 'persona', row.persona),
                                                  user_signature=True),
                                        _class='link-person',
                                        )
                                    }}
                                </td>
                                <td>{{=row.persona.matricula or 'sin matricula'}}</td>
                                <td>{{=row.persona.dni or '-'}}</td>
                                <td>{{=row.persona.domicilio or '-'}}</td>
                                <td class='abonar'>
                                    {{if row.pago:}}
                                        <center class='alert-success'>$ {{=row.total_abonado}}</center>
                                    {{else:}}
                                        <center class='alert-danger'>$ {{=row.total_abonado}}</center>
                                    {{pass}}
                                </td>
                                <td class='acreditar'>
                                    {{if row.acreditado:}}
                                        <center class='alert-success'><span class='glyphicon glyphicon-ok'></span></center>
                                    {{else:}}
                                        <center class='alert-danger'><span class='glyphicon glyphicon-remove'></span></center>
                                    {{pass}}
                                </td>   
                                <td>
                                    <div class='btn-group'>
                                        <a class='btn btn-default btn-xs actions {{="disabled" if row.pago else ""}}' title='Abonar' data-title="Realizar Pago" data-action="abonar">
                                            <span class='glyphicon glyphicon-usd'></span>
                                        </a>
                                        <a class='btn btn-default btn-xs actions {{="disabled" if row.acreditado else ""}}' title='Asistio' data-title="Confirma Asistencia?" data-action='acreditar'>
                                            <span class='glyphicon glyphicon glyphicon-list-alt'></span>
                                        </a>
                                        <a href="{{=URL(c='reports',
                                                        f='certificados',
                                                        extension='pdf',
                                                        args=(curso, row.id))}}" class='btn btn-default btn-xs {{="disabled" if not row.acreditado else ""}}' title='Imprimir Certificado'>
                                            <span class='glyphicon glyphicon-print'></span>
                                        </a>
                                        <a class='btn btn-danger btn-xs remove-item' title='Eliminar'>
                                            <span class='glyphicon glyphicon-remove-sign'></span>
                                        </a>
                                    </div>
                                </td> 
                            </tr>
                        {{pass}}
                    </tbody>
                </table>
            </div>
        {{pass}}
    </div>
</div>

<div class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3><span id='titulo'></span></h3>
            </div>
            <div class="modal-body">
                <div id='contenido' class='container-fluid'></div>
            </div>
            <div class="modal-footer">
                <span class='btn-ok'></span>
                <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancelar</button>
            </div>
        </div>
    </div>
</div>


<script>
    $('#curso-inscriptos').dataTable({
        lengthMenu: [[100, 150, 200, -1], [100, 150, 200, "All"]],
        oLanguage: {sUrl: "{{=URL('static', 'media/translate/dataTables.spanish.txt')}}"}
    });
</script>